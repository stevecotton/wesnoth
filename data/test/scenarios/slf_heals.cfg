[test]
    name = "Unit Test store healing locations"
    map_data = "{multiplayer/maps/2p_Ruined_Passage.map}"
    turns = 1
    id = store_healing_locations
    random_start_time = no
    is_unit_test = yes

    {DEFAULT_SCHEDULE}

    [side]
        side=1
        controller=human
        name = "Alice"
        type = Elvish Archer
        id=alice
        fog=no
        shroud=no
        share_view=no
    [/side]
    [side]
        side=2
        controller=human
        name = "Bob"
        type = Orcish Grunt
        id=bob
        fog=no
        shroud=no
        share_view=no
    [/side]

    [event]
        name = side 1 turn 1

        # sanity-check that there are some non-village healing locations on this map
        [store_locations]
            terrain="*^Do"
            variable=oases
        [/store_locations]
        {ASSERT {VARIABLE_CONDITIONAL oases.length greater_than 0}}

        [store_locations]
            terrain="*^V*,*^Do"
            variable=villages_and_oases
        [/store_locations]

        [store_locations]
            [heals]
            [/heals]
            variable=healing
        [/store_locations]
        {ASSERT {VARIABLE_CONDITIONAL healing.length equals $villages_and_oases.length}}

        {SUCCEED}
    [/event]
[/test]
