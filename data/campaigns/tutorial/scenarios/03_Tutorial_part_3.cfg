#textdomain wesnoth-tutorial

# The map is similar to the one for S2, with more villages on the orc side and some
# forests replaced with flat.

[tutorial]
    id=3_Tutorial
    name= _ "Wesnoth Tutorial — Part III"
    map_data="{campaigns/tutorial/maps/03_Tutorial_part_3.map}"
    turns=unlimited
    experience_modifier=100

    {DEFAULT_SCHEDULE}

    {SCENARIO_MUSIC       battle-epic.ogg}
    {EXTRA_SCENARIO_MUSIC the_city_falls.ogg}
    {EXTRA_SCENARIO_MUSIC casualties_of_war.ogg}
    {EXTRA_SCENARIO_MUSIC heroes_rite.ogg}
    {EXTRA_SCENARIO_MUSIC northerners.ogg}

    [side]
        side=1
        controller=human
        recruit=Orcish Grunt,Orcish Archer,Orcish Assassin,Wolf Rider
        gold=150
        save_id=human_player
        persistent=yes
        team_name=player
        user_team_name= _ "team_name^Student"
        fog=yes
        share_vision=all

        [leader]
            type=Fighter
            id=student
            name= _ "Konrad"
            unrenamable=yes
            canrecruit=yes
            facing=nw
        [/leader]

        [unit]
            id=Dumbo
            generate_name=yes
            type=Wolf Rider
            x,y=9,13
            facing=ne
            # choose the traits so that he doesn't get the quick trait
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_STRONG}
            [/modifications]
        [/unit]
    [/side]

    [side]
        side=2
        controller=ai
        recruit=Elvish Fighter,Elvish Archer,Elvish Shaman
        gold=80
        persistent=yes
        team_name=elves
        user_team_name= _ "team_name^Elves"

        [leader]
            type=Elvish Enchantress
            id=Miranna
            name= _ "Miranna"
            canrecruit=yes
            facing=se
            # Dextrous because we want to talk about not save-loading when the player's units die, and the other is a filler to stop her getting quick and being harder to block from important units
            [modifications]
                {TRAIT_DEXTROUS}
                {TRAIT_INTELLIGENT}
            [/modifications]
        [/leader]

        [unit]
            id=DumboBait
            generate_name=yes
            type=Elvish Fighter
            x,y=9,8
            facing=se
            # If this unit is quick then it's not safe for Dumbo to capture the village, as this unit can move far enough to ZoC Dumbo
            [modifications]
                {TRAIT_RESILIENT}
                {TRAIT_STRONG}
            [/modifications]
        [/unit]

        [unit]
            id=Elf1
            generate_name=yes
            type=Elvish Shaman
            x,y=6,6
            facing=se
        [/unit]

        [unit]
            id=Elf2
            generate_name=yes
            type=Elvish Fighter
            x,y=11,5
            facing=sw
        [/unit]

        [ai]
            # The first hint is to wait for the elves on the riverbank, so start with high aggression.
            # Later on we want poisoned elves to retreat and heal, this happens when Paelya takes over.
            {AI_SIMPLE_ALWAYS_ASPECT aggression    0.95}
        [/ai]
    [/side]

    [side]
        side=3
        controller=null
        team_name=elves
        user_team_name= _ "team_name^Elves"
        team_color=blue
        no_leader=yes
        hidden=yes

        [unit]
            id=Paelya
            role=elvish_tutor
            name= _ "Paelya"
            type=Elvish Druid
            x,y=12,2
            random_traits=no
            {IS_HERO}
            facing=sw # towards Miranna
        [/unit]
    [/side]

    [side]
        side=4
        controller=null
        team_name=player
        user_team_name= _ "team_name^Student"
        no_leader=yes
        hidden=yes
        fog=yes
        share_vision=all

        [unit]
            id=Grudush
            role=tutor
            name= _ "Grudush"
            type=Orcish Ruler
            x,y=19,26
            random_traits=no
            {IS_HERO}
            facing=nw
        [/unit]
    [/side]

    [event]
        name=prestart

        [objectives]
            side=1
            [objective]
                # po: the leader is female (initially an Elvish Enchantress, later an Elvish Druid takes command)
                description= _ "Defeat the Elf Leader"
                condition=win
            [/objective]

            [objective]
                description= _ "Death of Konrad"
                condition=lose
                [show_if]
                    [have_unit]
                        id=student
                        gender=male
                    [/have_unit]
                [/show_if]
            [/objective]

            [objective]
                description= _ "Death of Li’sar"
                condition=lose
                [show_if]
                    [have_unit]
                        id=student
                        gender=female
                    [/have_unit]
                [/show_if]
            [/objective]

            [objective]
                description= _ "Death of Grudush"
                condition=lose
            [/objective]

            {TURNS_RUN_OUT}

            [note]
                description=_ "todo: reduce the difficulty"
            [/note]
            [note]
                description=_ "Topics covered: fog (on the first couple of turns)"
            [/note]
            [note]
                description=_ "Topics covered: encircling with ZoCs (first turn, either by moving the scout north or at end-of-turn)"
            [/note]
            [note]
                description=_ "Topics covered: resistances (around turn 6)"
            [/note]
            [note]
                description=_ "The above are WIP but ready to review, below is going to change, and might be dropped as just too much info"
            [/note]
            [note]
                description=_ "Topics covered: having to encircle a strong enemy"
            [/note]
            [note]
                description=_ "Topics covered: you will lose units"
            [/note]
        [/objectives]

        [if]
            [have_unit]
                canrecruit=yes
                gender=female
            [/have_unit]
            [then]
                [modify_side]
                    side=1
                    side_name=_"Li’sar"
                [/modify_side]
            [/then]
        [/if]
    [/event]

    [event]
        name=start
        [set_menu_item]
            id=normal_start
            description=_ "normal_start"
        [/set_menu_item]
        {PRINT (_ "Please select ‘normal_start’ from the right-click menu")}
    [/event]

    [event]
        name=menu item normal_start
        [clear_menu_item]
            id=normal_start
        [/clear_menu_item]
        first_time_only=yes
        {CLEAR_PRINT}

        [message]
            speaker=narrator
            caption= _ "Welcome to Wesnoth!"
            image=wesnoth-icon.png
            message= _ "This is third part of the tutorial. Part 3 will teach you about fighting on unfavorable terrain, and tips on beating the AI. For this scenario, you’re playing the orcs instead of the elves.

Note: you could just skip this part and start a campaign. Part 2 has already taught you enough to play the rookie campaigns, and those campaigns will themselves cover the mechanics for the non-rookie campaigns." +
                {CONTINUE_MSG}
        [/message]

        # From previous scenarios the player has elves on their recruit list, even though the current scenario only lists orcs
        [disallow_recruit]
            side=1
            type=Elvish Fighter,Elvish Archer,Elvish Shaman
        [/disallow_recruit]
        [modify_unit]
            [filter]
                id=student
            [/filter]
            [filter_recall]
                [not]
                    race=elf
                [/not]
            [/filter_recall]
        [/modify_unit]

        [message]
            speaker=student
            message= _ "Why is it so foggy?"
        [/message]

        [message]
            speaker=Grudush
            message= _ "This is the <i>fog of war</i>. Although we know what the terrain is, we’ll only know where the enemy units are when we can see them."
        [/message]

        # po: the scout is an orcish grunt
        {TALK_ABOUT Dumbo ( _ "We have a scout on the middle island. For almost all units, their vision reaches one hex beyond the area they could move to, if they had all of their movement points and there were no other units blocking them. Once fog has been cleared, it will remain cleared for the current turn.")}

        {GENDER (
            [message]
                speaker=narrator
                image=wesnoth-icon.png
                # po: the male/female on this message is for the "you"
                message= _ "Note: you can’t undo any move that clears fog."
            [/message]
        )(
            [message]
                speaker=narrator
                image=wesnoth-icon.png
                # po: the male/female on this message is for the "you"
                message= _ "female^Note: you can’t undo any move that clears fog."
            [/message]
        )}

        [message]
            speaker=student
            message= _ "Grudush, I see elves on the north of the river. Didn’t the previous lesson show that orcs would be foolish to fight elves here?"
            female_message= _ "female^Grudush, I see elves on the north of the river. Didn’t the previous lesson show that orcs would be foolish to fight elves here?"
            scroll_to=no
        [/message]

        {GENDER (
            [message]
                speaker=Grudush
                # po: "your" refers to a male student
                message= _ "Fighting elves in their forests is tough, but in a campaign you rarely have a choice of where your army must go. Crossing the river here is our only option."
                scroll_to=no
            [/message]
        ) (
            [message]
                speaker=Grudush
                # po: "your" refers to a female student
                message= _ "female^Fighting elves in their forests is tough, but in a campaign you rarely have a choice of where your army must go. Crossing the river here is our only option."
                scroll_to=no
            [/message]
        )}

        [message]
            speaker=student
            message= _ "What should I do?"
            female_message= _ "female^What should I do?"
            scroll_to=no
        [/message]

        [message]
            speaker=Grudush
            # po: something to say while thinking, as in "Well … [pause], we’re going to get hurt a lot"
            message= _ "Well …"
            scroll_to=no
        [/message]

        [lift_fog]
            location_id=2
            radius=1
            [filter_side]
                side=1
            [/filter_side]
        [/lift_fog]

        [message]
            speaker=Miranna
            # po: This is said by Li'sar in the second scenario. The translation hint will say it's also said by Miranna, but she's just repeating the player's line.
            message= _ "female^Let’s go! Attack!"
            scroll_to=yes
        [/message]

        [message]
            speaker=Grudush
            # po: after the "Well …" and before this, the enemy leader shouts "Let’s go! Attack!"
            # po: the adjective "brash" is used in the unit descriptions for the tutorial's Fighter and Fighteress units
            message= _ "…, it seems the elvish leader is a brash student. That’s good for us: we can compensate for the terrain with better strategy."
            scroll_to=no
        [/message]

        # \todo: add gendered versions of this for "you"
        [message]
            speaker=narrator
            caption= _ "Recalling"
            image=wesnoth-icon.png
            # \todo: it should be a lot easier, "winnable" isn't a good thing to say here
            message= _ "In campaigns, you can normally <i>recall</i> your experienced veterans from previous scenarios. It’s unusual for a campaign to switch to the opposite sides, but in this scenario the tutorial does, and in this scenario the elves can’t be recalled."
        [/message]

        {GENDER (
            [message]
                speaker=Grudush
                # po: the male/female on this message is for the "You"
                message= _ "You can recruit the types of orcish units that Thrag recruited in the previous scenario: Orcish Grunts, Orcish Archers and Wolf Riders. You also have a new unit type available, the Orcish Assassin."
            [/message]
        ) (
            [message]
                speaker=Grudush
                # po: the male/female on this message is for the "You"
                message= _ "female^You can recruit the types of orcish units that Thrag recruited in the previous scenario: Orcish Grunts, Orcish Archers and Wolf Riders. You also have a new unit type available, the Orcish Assassin."
            [/message]
        )}

        [message]
            speaker=Grudush
            message= _ "Grunts and Archers are the main units of an Orcish army.

Recruit an assassin so that I can talk about their abilities, but probably only one.

Recruiting scouts, which for Orcs means Wolf Riders, helps see through the fog. This scenario is a small map with only two crossing points on the river, and we already have a scout, so a second scout might be useful but wouldn’t be essential. Units with less movement might be better for understanding the fog."
        [/message]

        [message]
            speaker=narrator
            caption= _ "Recruiting on the best hex"
            image=wesnoth-icon.png
            #po: this is based on the core help's "Recruiting and Recalling" page
            message= _ "You can choose which castle hex to recruit into. By right-clicking on a empty castle hex and selecting <i>Recruit</i> from the menu, the new unit will appear in that hex.

For example, Wolf Riders have 8 movement points. A rider recruited in either of the western hexes will definitely be able to take the southern village on its first move. A rider recruited on the north or south hex would have a chance of being able to do so, but only if it randomly received the <i>quick</i> trait, and in the eastern two hexes they would have no chance to reach that village in one move."
        [/message]
    [/event]

    [event]
        name=enter_hex
        [filter]
            id=Dumbo
            x= 8, 8, 9,10
            y=11,10,10,10
            # \todo: deciding whether to make Dumbo a Grunt or a Wolf Rider. As a Grunt, only x,y=9,10 needs to be checked, but with the wolf there are two villages on the elven bank that the player might go for
        [/filter]
        first_time_only=yes
        [filter_condition]
            [variable]
                name=spoke_about_dumbo_trap
                boolean_equals=no
            [/variable]
        [/filter_condition]

        #po: on the first turn, the player has moved the scout to the north end of the north bridge (one hex south of the trap)
        {TALK_ABOUT Dumbo ( _ "Speaking of not being too brash, let’s discuss the trap north of our scout.")}

        [cancel_action][/cancel_action]

        [fire_event]
            name=speak_about_dumbo_trap
        [/fire_event]

        # po: This is said at the end of the explanation about ZoC traps, but only if the player can still move - it's not shown if the ZoC explanation is shown at the end of the player's turn.
        {TALK_ABOUT Dumbo ( _ "Our scout could try to hold the middle island, but too many elves can get there before our reinforcements. You should bring that unit back to our side of the river instead of trying to hold the island.")}
    [/event]

    [event]
        name=side 1 turn 1 end

        [if]
            [variable]
                name=spoke_about_dumbo_trap
                boolean_equals=no
            [/variable]
            [then]
                # po: said at the end of the first turn, if the player didn't move in to the trap. The player might have moved the scout south or might not have moved it.
                {TALK_ABOUT Dumbo ( _ "Before the elves’ turn, let’s discuss a trap that Tharg would have fallen for, moving the scout north.")}

                [fire_event]
                    name=speak_about_dumbo_trap
                [/fire_event]

                # po: this message is just to separate the discussion about the trap from the discussion about fog resetting, please translate as anything that means "we've finished that topic".
                {TALK_ABOUT Dumbo ( _ "He’s much safer where you’ve put him.")}
            [/then]
        [/if]

        {TALK_ABOUT DumboBait ( _ "At the end of your turn, the fog resets to show only the hexes that your units can see. This message is just before the end of your turn, when you dismiss this message, it will be the elves' turn.")}
    [/event]

    # This event is about ZoC, but it's also part of the explanation of fog - this clears the fog around DumboBait, so that the end-of-turn dialogue can "TALK_ABOUT DumboBait" and be certain that the fog around that unit will change (unless the player deliberately moves Dumbo into the trap after this).
    [event]
        name=speak_about_dumbo_trap

        [store_unit]
            [filter]
                id=Dumbo
            [/filter]
            variable=copy_dumbo
        [/store_unit]

        {VARIABLE copy_dumbo.id DumboInTheTrap}
        # po: name of the ghost unit used for explaining ZoC
        {VARIABLE copy_dumbo.name "trapped unit"}

        [unstore_unit]
            variable=copy_dumbo
            x,y=9,9
        [/unstore_unit]
        {CLEAR_VARIABLE copy_dumbo}

        # make the copy ghostly (grayscale and opaque)
        [object]
            [filter]
                id=DumboInTheTrap
            [/filter]
            [effect]
                apply_to=image_mod
                add="GS()"
            [/effect]
            [effect]
                apply_to=image_mod
                add="O(0.5)"
            [/effect]
        [/object]

        [redraw]
            # clear_shroud is used to clear the fog here
            clear_shroud=yes
        [/redraw]

        {TALK_ABOUT DumboInTheTrap ( _ "Our scout could attack the elf, but that would just throw away our unit. Tharg was too aggressive, he’d rush forward with a single unit.")}

        [move_unit]
            id=Elf1
            to_x,to_y=8,9
        [/move_unit]
        [modify_unit]
            [filter]
                id=Elf1
            [/filter]
            facing=ne
        [/modify_unit]
        [move_unit]
            id=Elf2
            to_x,to_y=10,8
        [/move_unit]
        [modify_unit]
            [filter]
                id=Elf2
            [/filter]
            facing=sw
        [/modify_unit]
        [move_unit]
            id=DumboBait
            to_x,to_y=7,4
        [/move_unit]

        [item]
            image=misc/highlight-hex.png
            [filter_adjacent_location]
                [filter]
                    id=Elf1,Elf2
                [/filter]
            [/filter_adjacent_location]
        [/item]

        # po: "encircle" is an obscure word, but one of the tips in the "wesnoth" text domain uses "encircling", and the tutorial shows a diagram with highlighted hexes while showing this text
        {TALK_ABOUT DumboInTheTrap ( _ "On their turn, the elves could encircle our unit. When two units are on opposite sides of an enemy, their overlapping <i>Zones of Control</i> mean the unit is trapped - it can only move one hex before being stopped by the ZoC.

Not only would we lose the unit, the elves would have enough time to heal their injuries before our other units could attack them.")}

        [move_unit]
            id=DumboBait
            to_x,to_y=9,8
        [/move_unit]
        [remove_item]
            image=misc/highlight-hex.png
        [/remove_item]
        [move_unit]
            id=Elf1
            to_x,to_y=6,6
        [/move_unit]
        [move_unit]
            id=Elf2
            to_x,to_y=11,5
        [/move_unit]
        [kill]
            id=DumboInTheTrap
            fire_event=no
        [/kill]

        {VARIABLE spoke_about_dumbo_trap yes}
    [/event]

    # Explaining the Assassin
    [event]
        name=recruit,recall
        [filter]
            side=1
            type_adv_tree=Orcish Assassin
        [/filter]

        [select_unit]
            id=$unit.id
        [/select_unit]

        [message]
            speaker=narrator
            image=$unit.profile
            caption= _ "Orcish Assassin"
            message= _ "The Assassin’s ranged attack has two specials: <i>poison</i> and <i>marksman</i>.

In addition to the damage from the attack, an enemy that’s been hit will be <i>poisoned</i>. That unit will take 8 HP of damage each turn until they either drop to 1 HP or heal in a village.

The attack has at least a 60% chance of hitting, even when the enemy is on terrain with better defense. This is only active <i>on offense</i>, on your own turn when you choose to attack. It isn’t active <i>on defense</i>, when the assassin is retaliating during the opponent’s turn."
        [/message]

        [message]
            speaker=narrator
            image=$unit.profile
            caption= _ "Orcish Assassin"
            message= _ "Assassins are harder to hit than most orcs, as they have good <i>defense</i> on most terrains. However they have negative <i>resistances</i>, meaning they take more damage from blades and piercing weapons when they get hit.

There’s more information than can be shown in the sidebar on the right hand side of the screen, but additional information is shown in the tooltips: resistances are in the hitpoints’ tooltip.

Tooltips aren’t shown while a message is being shown."
        [/message]
    [/event]

    # Explaining the Archer
    [event]
        name=recruit,recall
        [filter]
            side=1
            type_adv_tree=Orcish Archer
        [/filter]

        [select_unit]
            id=$unit.id
        [/select_unit]

        [message]
            speaker=narrator
            image=$unit.profile
            caption= _ "Orcish Archer"
            message= _ "The Orcish Archer has two ranged attacks: one that does 6x3 and one that does 7x2 damage. Normally the 6x3 will have the better chance of doing the most damage, but when attacking a unit with exactly 7 HP remaining the 7x2 attack has a better chance of killing the enemy. When you attack, the game will automatically highlight its recommendation."
        [/message]
    [/event]

    [event]
        name=turn 2

        {TALK_ABOUT Miranna ( _ "If the elvish leader is as brash as she sounds, then we can expect a rush of elves coming over the bridge. We can keep our forces on this side of the river and overwhelm the elves as they come over the bridge.")}
    [/event]

    [event]
        name=turn 5

        {TALK_ABOUT_LOC 11,14 ( _ "It is now nighttime. Orcs are <i>chaotic</i>, which means our attacks are now 25% stronger. By day, our attacks are 25% weaker, which is a noticeable difference. The elves are <i>neutral</i>: unaffected by the time of day.")}

        [message]
            speaker=student
            message= _ "So I am the only unit which is stronger by day and weaker by night."
            female_message= _ "female^So I am the only unit which is stronger by day and weaker by night."
        [/message]

        # Unrelated to the student's comment, this is about the right time to start the explanation of fire vs pierce damage.
        # The spawn location is in a forest, surrounded by forest on all six sides, so it'll be
        # hidden even if an elf is stood on that hex and the wose is spawned on an adjacent hex,
        # it's expected to be sighted as it crosses the bridge.
        [unit]
            type=Wose
            id=FireTarget
            x,y=8,6
            side=2
        [/unit]
    [/event]

    [event]
        name=sighted
        [filter]
            id=FireTarget
        [/filter]
        [filter_second]
            side=1
        [/filter_second]

        [scroll_to_unit]
            id=FireTarget
            highlight=yes
        [/scroll_to_unit]

        [message]
            id=student
            scroll=no
            highlight=no
            # po: the first time we see a Wose. For this tutorial it's simply an enemy that's weak to fire.
            message=_ "Is that a tree?"
        [/message]

        [message]
            speaker=Grudush
            scroll=no
            highlight=no
            message=_ "More or less. Our archers’ fire arrows are good against those things, but don’t let it get into the forest on our side of the bridge, because it can easily hide among the trees."
        [/message]

        [message]
            speaker=narrator
            image="units/woses/wose.png~TC(2,magenta)~XBRZ(2)"
            message=_ "Fire attacks will do 50% more damage to the Wose, for example the Orcish Archer’s fire arrows will do 10x2 instead of 7x2. In the status pane, you can mouse-over the Wose’s HP to see its <i>resistances</i>, or the Archer’s attacks to see how much damage they do to different enemies.

Woses are <i>lawful</i> (+25% damage during daytime), and have the <i>regeneration</i> ability: they will heal 8 HP per turn, whether or not a healer is adjacent to them.

You can ignore its <i>ambush</i> ability for now. This Wose is the only enemy with this ability in this scenario, and the ability will be inactive unless it gets into a forest hex."
        [/message]
    [/event]

    [event]
        name=check_income
        first_time_only=no
        [filter_condition]
            [variable]
                name=spoke_about_income
                boolean_equals=no
            [/variable]
        [/filter_condition]

        [store_gold]
            side=1
        [/store_gold]

        [if]
            [variable]
                name=gold
                greater_than=12
            [/variable]
            [have_unit]
                race=orc
                count=0-12
            [/have_unit]
            [then]
                {VARIABLE spoke_about_income yes}

                [message]
                    speaker=student
                    message= _ "I have enough gold to recruit more units!"
                    female_message= _ "female^I have enough gold to recruit more units!"
                [/message]

                [message]
                    speaker=Grudush
                    message= _ "Good idea! Orcs are cheaper to recruit than elves, but you should expect to need to recruit more units. Retreat wounded units to villages when you can, but accept that you can’t keep all of your troops alive."
                [/message]
            [/then]
        [/if]

        {CLEAR_VARIABLE gold}
    [/event]

    [event]
        name=turn 6

        [fire_event]
            name=check_income
        [/fire_event]
    [/event]

    [event]
        name=turn 7

        [fire_event]
            name=check_income
        [/fire_event]
    [/event]

    # This should happen around the time that the player deals with the Wose, and Miranna will be able to reach the south bank a few turns later.
    [event]
        name=turn 10

        [lift_fog]
            [filter]
                id=Miranna
                [or]
                    id=Paelya
                [/or]
            [/filter]
            radius=1
            [filter_side]
                side=1
            [/filter_side]
        [/lift_fog]

        [message]
            speaker=Paelya
            message=_ "Miranna, you’re being far too reckless!"
        [/message]

        [message]
            speaker=Miranna
            message=_ "Sorry, I’m too keen to fight. Shall I join the front line, and leave you to command?"
        [/message]

        {UNMAKE_HERO Paelya}
        [modify_unit]
            [filter]
                id=Paelya
            [/filter]
            side=2
            canrecruit=yes
        [/modify_unit]

        {MODIFY_UNIT id=Miranna canrecruit no}
        {MAKE_HERO Miranna}

        # Balancing the aggression - although we want the elves to rush into ambushes, we also want them to retreat when poisoned
        {MODIFY_AI_ADD_SIMPLE_ALWAYS_ASPECT 2 aggression 0.3}
        {MODIFY_AI_ADD_SIMPLE_ALWAYS_ASPECT 2 caution 0.6}

        {TALK_ABOUT Miranna ( _ "The magical attack of an Elvish Enchantress is very strong, and if she doesn’t manage to kill an orc herself then another elf is likely to try and finish the already-weakened orc, so assume that we will lose some orcs in this battle.

In the previous lesson you learnt to decide which units should get the best chances to gain experience. You should decide which units will be shielded using other units’ <i>Zone of Control</i>.")}
    [/event]

    [event]
        name=last_breath
        [filter]
            id=student
        [/filter]

        [message]
            speaker=unit
            message= _ "That... was foolish. Next time I should be more careful."
            female_message= _ "female^That... was foolish. Next time I should be more careful."
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=student
        [/filter]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
        name=last_breath
        [filter]
            id=Grudush
        [/filter]

        [message]
            speaker=unit
            message= _ "Agh! Now who will teach you how to defeat these elves!"
        [/message]
    [/event]

    [event]
        name=die
        [filter]
            id=Grudush
        [/filter]

        [endlevel]
            result=defeat
        [/endlevel]
    [/event]

    [event]
        name=defeat

        {CLEAR_PRINT}
    [/event]

    [event]
        name=victory

        [message]
            speaker=Grudush
            message= _ "You have seen how both sides can fight this scenario! You may want to try one of the novice-level campaigns next, such as <i>A Tale of Two Brothers</i>, <i>An Orcish Incursion</i>, or <i>The South Guard</i>. Konrad, Li’sar and Delfador are characters from <i>Heir to the Throne</i>. You can also refer to the in-game help browser if you ever need to refresh your memory on gameplay mechanics."
        [/message]

        {CLEAR_VARIABLE spoke_about_dumbo_trap,spoke_about_income}
    [/event]
[/tutorial]
